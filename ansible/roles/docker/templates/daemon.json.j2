{
  "storage-driver": "overlay2",
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m",
    "max-file": "3"
  },
{% if groups['swarm_workers'] is defined and groups['swarm_workers'] | length > 0 %}
  "metrics-addr": "0.0.0.0:9323",
  "experimental": true,
  "default-address-pools": [
    {
      "base": "172.16.0.0/16",
      "size": 24
    }
  ],
{% else %}
  "metrics-addr": "127.0.0.1:9323",
  "experimental": true,
{% endif %}
  "dns": ["8.8.8.8", "8.8.4.4"]
} 