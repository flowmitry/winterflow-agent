---
description: 
globs: 
alwaysApply: false
---
# Registry Operations Feature Flag

The flag `FeatureRegistriesDisabled` defined in [features.go](mdc:internal/application/config/features.go) disables **all Docker registry operations** when set to `true` in the loaded configuration.

Affected handlers (they short-circuit with an error if the flag is enabled):

* [create_registry/command_handler.go](mdc:internal/application/command/create_registry/command_handler.go)
* [delete_registry/command_handler.go](mdc:internal/application/command/delete_registry/command_handler.go)
* [get_registries/query_handler.go](mdc:internal/application/query/get_registries/query_handler.go)

These handlers are wired into the system via:

* [command/handlers.go](mdc:internal/application/command/handlers.go)
* [query/handlers.go](mdc:internal/application/query/handlers.go)

Usage pattern inside a handler:
```go
if cfg != nil && cfg.IsFeatureEnabled(config.FeatureRegistriesDisabled) {
    return log.Errorf("registries operations are disabled by configuration")
}
```

Enable/disable the feature via the `features` section of the config file:
```json
{
  "features": {
    "registries_disabled": true
  }
}
```
